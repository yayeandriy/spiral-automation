{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://spiral-automation.com/schemas/api-documentation-section.json",
  "title": "API Documentation Section Schema",
  "description": "Schema for API Documentation section with technical references, endpoints, and code examples",
  "type": "object",
  "required": ["name", "tag", "description", "children"],
  "properties": {
    "name": {
      "type": "string",
      "const": "API Documentation",
      "description": "Must be 'API Documentation'"
    },
    "tag": {
      "type": "string",
      "const": "api-docs",
      "description": "Must be 'api-docs'"
    },
    "description": {
      "type": "string",
      "minLength": 20,
      "maxLength": 500,
      "description": "Technical overview of API capabilities and usage"
    },
    "children": {
      "type": "array",
      "minItems": 5,
      "maxItems": 20,
      "items": { "$ref": "#/definitions/api_child" }
    },
    "metadata": { "$ref": "#/definitions/metadata" }
  },
  "definitions": {
    "api_child": {
      "type": "object",
      "required": ["name", "description"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[A-Z][a-zA-Z0-9 \\-\\/]+$",
          "minLength": 5,
          "maxLength": 100,
          "examples": [
            "Authentication & Authorization",
            "REST API Endpoints",
            "WebSocket Connections",
            "Error Handling",
            "Rate Limiting"
          ]
        },
        "description": {
          "type": "string",
          "minLength": 25,
          "maxLength": 2000,
          "description": "Technical details about API functionality, parameters, and usage"
        },
        "bullet_points": {
          "type": "array",
          "minItems": 2,
          "maxItems": 15,
          "items": {
            "type": "string",
            "minLength": 10,
            "maxLength": 250,
            "description": "Technical specifications, endpoints, parameters, or implementation notes"
          }
        },
        "code_examples": {
          "type": "array",
          "minItems": 1,
          "items": { "$ref": "#/definitions/api_code_example" }
        },
        "api_methods": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS", "HEAD"]
          },
          "description": "HTTP methods supported by this API section"
        },
        "authentication_required": {
          "type": "boolean",
          "description": "Whether authentication is required for this API section"
        },
        "rate_limit": {
          "type": "object",
          "properties": {
            "requests_per_minute": { "type": "integer", "minimum": 1 },
            "requests_per_hour": { "type": "integer", "minimum": 1 }
          }
        },
        "links": {
          "type": "array",
          "items": { "$ref": "#/definitions/link" }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "rest-api", "websocket", "authentication", "authorization",
              "endpoints", "parameters", "responses", "errors",
              "rate-limiting", "webhooks", "sdk", "integration"
            ]
          }
        }
      }
    },
    "api_code_example": {
      "type": "object",
      "required": ["title", "code", "language"],
      "properties": {
        "title": { "type": "string", "minLength": 8, "maxLength": 120 },
        "code": { "type": "string", "minLength": 20 },
        "language": {
          "type": "string",
          "enum": ["javascript", "python", "curl", "json", "typescript", "php", "ruby", "go", "java"]
        },
        "description": { "type": "string", "maxLength": 400 },
        "endpoint": { "type": "string", "pattern": "^/[a-zA-Z0-9/_-]*$" },
        "method": {
          "type": "string",
          "enum": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS", "HEAD"]
        }
      }
    },
    "link": {
      "type": "object",
      "required": ["title", "url"],
      "properties": {
        "title": { "type": "string", "minLength": 5, "maxLength": 100 },
        "url": { "type": "string", "format": "uri" },
        "description": { "type": "string", "maxLength": 200 }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": { "type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$" },
        "last_updated": { "type": "string", "format": "date" },
        "author": { "type": "string", "maxLength": 100 },
        "priority": { "type": "string", "enum": ["high", "medium", "low"] },
        "target_audience": {
          "type": "array",
          "items": { "type": "string", "enum": ["developers", "technical-writers", "administrators"] }
        }
      }
    }
  },
  "additionalProperties": false
}
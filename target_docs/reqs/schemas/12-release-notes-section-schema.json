{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://spiral-automation.com/schemas/release-notes-section.json",
  "title": "Release Notes Section Schema",
  "description": "Schema for Release Notes section with version history, updates, and changelog information",
  "type": "object",
  "required": ["name", "tag", "description", "children"],
  "properties": {
    "name": {
      "type": "string",
      "const": "Release Notes",
      "description": "Must be 'Release Notes'"
    },
    "tag": {
      "type": "string",
      "const": "release-notes",
      "description": "Must be 'release-notes'"
    },
    "description": {
      "type": "string",
      "minLength": 20,
      "maxLength": 500,
      "description": "Overview of version history, updates, and changelog information"
    },
    "children": {
      "type": "array",
      "minItems": 3,
      "maxItems": 20,
      "items": { "$ref": "#/definitions/release_child" }
    },
    "metadata": { "$ref": "#/definitions/metadata" }
  },
  "definitions": {
    "release_child": {
      "type": "object",
      "required": ["name", "description"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^(Version \\d+\\.\\d+\\.\\d+|Latest Updates|Upcoming Features|Breaking Changes)$",
          "minLength": 8,
          "maxLength": 80,
          "examples": [
            "Version 2.1.0",
            "Version 1.5.3",
            "Latest Updates",
            "Upcoming Features",
            "Breaking Changes"
          ]
        },
        "description": {
          "type": "string",
          "minLength": 30,
          "maxLength": 2000,
          "description": "Detailed release information, changes, and improvements"
        },
        "bullet_points": {
          "type": "array",
          "minItems": 2,
          "maxItems": 15,
          "items": {
            "type": "string",
            "minLength": 15,
            "maxLength": 250,
            "description": "Specific changes, features, bug fixes, or improvements"
          }
        },
        "version_number": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$",
          "description": "Semantic version number"
        },
        "release_date": {
          "type": "string",
          "format": "date",
          "description": "Date of release (YYYY-MM-DD format)"
        },
        "release_type": {
          "type": "string",
          "enum": ["major", "minor", "patch", "hotfix", "beta", "alpha"],
          "description": "Type of release"
        },
        "changes": {
          "type": "object",
          "properties": {
            "new_features": {
              "type": "array",
              "items": { "type": "string", "minLength": 10, "maxLength": 200 }
            },
            "improvements": {
              "type": "array",
              "items": { "type": "string", "minLength": 10, "maxLength": 200 }
            },
            "bug_fixes": {
              "type": "array",
              "items": { "type": "string", "minLength": 10, "maxLength": 200 }
            },
            "breaking_changes": {
              "type": "array",
              "items": { "type": "string", "minLength": 10, "maxLength": 200 }
            },
            "deprecated_features": {
              "type": "array",
              "items": { "type": "string", "minLength": 10, "maxLength": 200 }
            }
          }
        },
        "compatibility": {
          "type": "object",
          "properties": {
            "minimum_version": { "type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$" },
            "breaking_changes": { "type": "boolean" },
            "migration_required": { "type": "boolean" },
            "backward_compatible": { "type": "boolean" }
          }
        },
        "download_links": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["platform", "url"],
            "properties": {
              "platform": { "type": "string", "examples": ["Windows", "macOS", "Linux", "Docker", "Web"] },
              "url": { "type": "string", "format": "uri" },
              "file_size": { "type": "string", "pattern": "^\\d+(\\.\\d+)? (KB|MB|GB)$" },
              "checksum": { "type": "string", "minLength": 32, "maxLength": 128 }
            }
          }
        },
        "migration_notes": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["step", "instruction"],
            "properties": {
              "step": { "type": "integer", "minimum": 1 },
              "instruction": { "type": "string", "minLength": 20, "maxLength": 400 },
              "warning": { "type": "string", "maxLength": 200 },
              "code_example": { "type": "string", "maxLength": 500 }
            }
          }
        },
        "links": {
          "type": "array",
          "items": { "$ref": "#/definitions/link" }
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "release", "version", "changelog", "update", "new-features",
              "bug-fixes", "improvements", "breaking-changes", "migration",
              "beta", "stable", "hotfix"
            ]
          }
        }
      }
    },
    "link": {
      "type": "object",
      "required": ["title", "url"],
      "properties": {
        "title": { "type": "string", "minLength": 5, "maxLength": 100 },
        "url": { "type": "string", "format": "uri" },
        "description": { "type": "string", "maxLength": 200 }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "version": { "type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$" },
        "last_updated": { "type": "string", "format": "date" },
        "author": { "type": "string", "maxLength": 100 },
        "priority": { "type": "string", "enum": ["high", "medium", "low"] },
        "target_audience": {
          "type": "array",
          "items": { "type": "string", "enum": ["developers", "administrators", "end-users", "managers"] }
        }
      }
    }
  },
  "additionalProperties": false
}